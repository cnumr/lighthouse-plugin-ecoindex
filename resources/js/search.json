[[{"l":"Plugin Ecoindex pour Lighthouse","p":["npm GitHub License"]},{"l":"Introduction","p":["Ce plugin ajoute EcoIndex® à Lighthouse®."]},{"l":"Il permet d'obtenir :","p":["Les mesures d'impact environnementale multicritères de votre site ;","Une évalation de la mise en oeuvre des bonnes pratiques du Green IT ;"]},{"l":"En générant :","p":["Des rapports HTML, JSON ou la Déclaration Environnementale de votre site – Environmental Impact Statement (EIS) – une initiative de GreenIT.fr®","Des résultats automatiquement ajoutés à votre CI/CD ou un à serveur Lighthouse."]},{"l":"Il peut être utilisé de quatre manières différentes :","p":["En ligne de commande npx lighthouse-plugin-ecoindex command options avec le cli fourni par le plugin ;","Avec Lighthouse cli npm lighthouse url options;","Avec Lighthouse CI;","Avec l'application compagnon EcoindexApp, installable et utilisable sans limitations sur votre ordinateur."]},{"l":"En respectant des contraintes permettant :","p":["D'avoir des mesures réalistes et où les éléments des pages sont chargés (images, scripts, polices, etc.) ;","D'avoir des mesures normalisées entre chaque exécution ;","D'obtenir des mesures comparables entre les sites."]},{"l":"Les contraintes / process reproductible :","p":["Lancez un navigateur Chrome sans tête avec les capacités no-sandbox, disable-dev-shm-usage et goog:loggingPrefs définies sur {\"performance\" : \"ALL\"}.","Ouvrez la page sans données locales (cache, cookies, localstorage...) à une résolution de 1920 × 1080px.","Attendez 3 secondes","Faites défiler la page jusqu'en bas","Attendez encore 3 secondes","Fermer la page","Lors de la mesure d'un parcours utilisateur, le cache est vide au début du parcours, mais est conservé et réutilisé tout au long du parcours, si il est mise en place par le site (Bonne pratique)."]},{"l":"Récapitulatif des fonctionnalités","p":["⚠️ Recommandation d'usage","✅","❌","Bonnes pratiques Green IT","CI","cli(int)","cli(lh)","client interne npx lighthouse-plugin-ecoindex command options;","client Lighthouse [Usage non recommandé] npm lighthouse url options.","Déclaration Environnementale","Fonctionnalités","Lighthouse CI ;","Publication des données d'audits à un serveur Lighthouse","Puppeteer","Rapports Lighthouse avec les audits ecoindex"]},{"l":"Documentation des usages","p":["lighthouse-plugin-ecoindex CLI Lighthouse CLI Lighthouse CI EcoindexApp","Details of plugin results"]}],[{"l":"Que mesure lighthouse-ecoindex ?","p":["Le plugin lighthouse-ecoindex mesure les critères suivants :","Le nombres d'élements HTML (DOM), auquels sont retirés les sous-éléments des svg;","Le nombre de requêtes HTTP ;","Le poids total des ressources téléchargées.","On peut donc en déduire :","Un score EcoIndex®, noté de 0 à 100 ;","Une note EcoIndex®, noté de A à E ;","Les émissions de CO2 ;","La consommation d'eau.","Comment fonctionne l'écoindex ?","Ce sont les informations principales que l'on retrouve sur la page de résultat de l'audit.","Vous y retrouverez également un tableau de synthèse des résultats des audits Lighthouse et EcoIndex® : les audits correspondants aux bonnes pratiques."]}],[{"l":"Utilisation de lighthouse-ecoindex"},{"l":"Objectifs","p":["Cet utilitaire en ligne de commande (cli) permet, au travers de Lighthouse, d'obtenir des rapports d'audits Green IT de votre site web. Cela pour :","des parcours (1 parcours = 1 liste d'URL) via un fichier JSON ;","une liste d'URLs ;","une URL unique.","En respectant des contraintes permettant d'avoir des mesures réalistes et où les éléments des pages sont chargés (images, scripts, polices, etc.), normalisées entre chaque exécution et comparables entre les sites.","A la sortie, vous obtiendrez :","Des rapports d'audits Lighthouse avec les audits EcoIndex et les bonnes pratiques, au format HTML et/ou JSON + un summary des résultats au format json","Une Déclaration Environnementale de votre site – Environmental Impact Statement (EIS) – l'initiative de GreenIT.fr®, au format JSON, HTML et Markdown."]},{"l":"Installation","p":["Le plugin ne necessite pas d'installation, il est directement utilisable via npx, mais il écessite puppeteer et Chrome à une version spécifique (la ou une des dernières).","Si vous le désirez, vous pouvez installer le plugin via npm :","Un navigateur, sans interface graphique et nécessaire aux mesures, doit s'intaller en même temps que l'installation du plugin, mais vous pouvez le lancer à la main via :","Pour vérifier l'installation de ce navigateur :"]},{"l":"Utilisation","p":["Commandes disponibles :","npx lighthouse-plugin-ecoindex collect options","Sert à lancer la collecte des audits Lighthouse et EcoIndex suivant les options passées en paramètres.","npx lighthouse-plugin-ecoindex convert options","Sert à générer la Déclaration Environnementale de votre site – Environmental Impact Statement (EIS) – l'initiative de GreenIT.fr® au format JSON, HTML et Markdown, si elle n'a pas été générée lors de la collecte.","npx lighthouse-plugin-ecoindex browser-install","Installation de Chrome headless (sans interface graphique)","npx lighthouse-plugin-ecoindex browser-check","Vérification de la bonne installation de Chrome headless (sans interface graphique)."]},{"l":"command collect","p":["npx lighthouse-plugin-ecoindex collect options","Sert à lancer la collecte des audits Lighthouse et EcoIndex suivant les options passées en paramètres."]},{"l":"Options","p":["-d, --demo: Utilise les un fichier de démonstration (voir plus bas).","-u, --url: URL à auditer, supporte plusieurs valeurs.","-j, --json-file: Fichier structuré, doit respecter un schéma (voir plus bas).","-h, --extra-header: Objet de configuration supplémentaire pour Lighthouse. Chaîne JSON ou chemin vers un fichier JSON.","-p, --output-path: Dossier de sortie.","-o, --output: Rapporteur pour les résultats, supporte plusieurs valeurs. Choix : \"json\", \"html\", \"statement\". ATTENTION : \"csv\" n'est pas disponible.","-a, --audit-category: Audit à exécuter, supporte plusieurs valeurs. Available categories: \"accessibility\", \"best-practices\", \"performance\", \"seo\" and \"lighthouse-plugin-ecoindex-core\".","--user-agent: User-Agent à utiliser pour les requêtes.","--auth: Moyen de s'authentifier pendant les mesures (--auth.url, --auth.user.target, --auth.user.value, etc. voir le tableau plus bas).","--help: Affiche l'aide."]},{"l":"Exemples","p":["Génère un rapport avec le fichier de démonstration.","Génère des plusieurs rapports pour de multiples parcours.","Génère des rapports pour plusieurs URLs avec un user-agent spécifique.","Génère un rapport pour une URL."]},{"l":"Utilisation d'un fichier de configuration JSON","p":["Le format du fichier doit être respecté !"]},{"l":"Modèle de fichier JSON"},{"l":"Explications","p":["array","auth","auth.pass","auth.pass.target","auth.pass.value","auth.url","auth.user","auth.user.target","auth.user.value","boolean","courses","courses.course","courses.is-best-pages","courses.name","courses.target","courses.urls","Description","Dossier ou exporter les rapports.","extra-header","Gestion de l'authentification.","Identifiant de l'utilisateur.","Indique si ce parcours est celui utilisé dans la déclaration environnementale comme les 5 pages les plus visitées du site.","Les informations nécessaires pour votre audit (authentification, cookies, etc).","Les parcours à auditer.","Les types d'export souhaités : html, json, statement(statement = déclation environnementale).","Liste des urls à mesurer.","nom du parcours, qui sera affiché dans la déclaration en environnementale.","object","Objectif du parcours, qui sera affiché dans la déclaration en environnementale.","output","output-path","Parcours cible. Rapide liste des pages parcourues, qui sera affichée dans la déclaration en environnementale.","Password de l'utilisateur.","Propriété","random ou un user agent spécifique. Utilisez random pour ne pas vous faire détecter et bloquer par les anti-bot.","string","Target (.class ou #id) du champs de l'identifiant de l'utilisateur.","Target (.class ou #id) du champs du password de l'utilisateur.","Type","Url de la page d'authentification ( MANDATORY Cette URL doit aussi être indiquée dans les URLs à mesurer dans les parcours).","user-agent","Valeur de l'identifiant de l'utilisateur.","Valeur du password de l'utilisateur."]},{"l":"command convert","p":["npx lighthouse-plugin-ecoindex convert options","Sert à générer la Déclaration Environnementale de votre site – Environmental Impact Statement (EIS) – l'initiative de GreenIT.fr® au format JSON, HTML et Markdown, si elle n'a pas été générée lors de la collecte."]},{"i":"options-1","l":"Options","p":["-i, --input-report: Fichier JSON généré par lighthouse-ecoindex.","-p, --output-path: Dossier de sortie.","--help: Affiche l'aide."]},{"i":"exemples-1","l":"Exemples","p":["Convertir le(s) rapport(s) JSON généré(s) par lighthouse-ecoindex en fichier de déclaration environnementale.","Projet example pour npx lighthouse-plugin-ecoindex"]}],[{"l":"Utilisation avec Lighthouse CI"},{"l":"Objectifs","p":["Utiliser le plugin lighthouse-ecoindex avec Lighthouse CI dans vos outils de CI/CD ou vos repositories CI/Cd.","Vous pourrez ainsi :","Publier les résultats des audits Lighthouse et EcoIndex® dans votre CI/CD ;","Publier les résultats des audits Lighthouse et EcoIndex® dans un serveur Lighthouse."]},{"l":"Installation","p":["Vous devez utiliser les fichiers de configuration de Lighthouse (exemple ci-dessous) et Puppeteer (présent dans le plugin) pour pouvoir utiliser le plugin lighthouse-ecoindex."]},{"l":"Utilisation","p":["Vous devez utiliser le fichiers configuration de Lighthouse pour pouvoir utiliser le plugin lighthouse-ecoindex.","Placer le fichier .lighthouserc.js à la racine de votre projet.","Le fichier de configuration Puppeteer est indiqué dans puppeteerScript du fichier. Si besoin, adapter le chemin qui doit être en absolu, obligatoire avec lhci.","Ne modifier pas le fichier Puppeteer sauf si vous devez ajouter des actions spécifiques (ex. Fermeture de popin pour validation de cookies). Conserver le process en place pour avoir des mesures normalisée."]},{"l":"Modèle de fichier de configuration de Lighthouse"},{"l":"Modèle de fichier de configuration de Puppeteer"},{"l":"Exemple","p":["Projet example pour lighthouse-ci"]},{"l":"Exemples à adapter suivant votre CI/CD","p":[".github/workflows/ci.yml",".gitlab-ci.yml","package.json",".lighthouserc.js",".puppeteerrc.cjs","lighthouse-metrics.js",".circleci/config.yml","machine-setup.sh","job.sh"]},{"l":"Documentation externe des dépendances","p":["Lighthouse CI","Puppeteer"]}],[{"l":"Utilisation avec LHCI Server","p":["LHCI Server est un serveur web qui permet de stocker et de visualiser les rapports d'audits Lighthouse. Vous avez ainsi la possibilité de suivre l'évolution de la performance de votre site web, à travers le temps (à chaque commit, par exemple)."]},{"l":"Objectifs","p":["LHCI Server est un serveur web qui permet de stocker et de visualiser les rapports d'audits Lighthouse.","Par défaut, il n'est pas en capacité d'afficher les résultats des audits EcoIndex. Ce guide vous permettra de configurer LHCI Server pour afficher les résultats des audits EcoIndex. Voir plus bas"]},{"l":"Installation","p":["Suivre le documentations de LHCI Server pour l'installation.","LHCI Server"]},{"l":"IMPORTANT Configuration pour afficher les résultats des audits EcoIndex dans les graphs","p":["Exemple d'un LHCI Server Docker, avec ecoindex","A faire avant d'uploader les audits EcoIndex !","Editer ce fichier : /usr/src/lhci/node_modules/@lhci/server/src/api/statistic-definitions.js(suivant votre installation, le chemin peut varier).","Ajouter ces lignes :","Si vous utilisez Docker, cette configuration sera parfois perdue. Pour palier à ce problème, vous pouvez créer un script qui modifie/remplace le fichier de configuration à chaque redémarrage du conteneur, ou utiliser patch-package pour patcher le fichier de configuration (cf. Exemple d'un LHCI Server Docker, avec ecoindex).","Documentation externe des dépendances","LHCI Server"]},{"i":"statistic-definitionsjs-sans-les-modifications","l":"`statistic-definitions.js` sans les modifications \uD83D\uDFE0"},{"i":"statistic-definitionsjs-avec-les-modifications","l":"`statistic-definitions.js` avec les modifications \uD83D\uDFE2"}],[{"l":"Utilisation avec lighthouse CLI"},{"l":"Objectifs","p":["Utiliser le plugin lighthouse-ecoindex avec le client Lighthouse CLI."]},{"l":"Recommandation","p":["Comme lighthouse en mode cli ne permet pas d'utiliser le scénario de navigation Puppeteer et ne permet de lancer l'analyse que d'une seule page à fois ( sans mettre à jour le fichier de configuration), il est recommandé d'utiliser le client interne fourni par le plugin.","lighthouse-plugin-ecoindex CLI"]},{"l":"Installation","p":["Vous devez utiliser les fichiers de configuration de Lighthouse (exemple ci-dessous) pour pouvoir utiliser le plugin lighthouse-ecoindex."]},{"l":"Utilisation","p":["Vous devez utiliser le fichiers configuration de Lighthouse pour pouvoir utiliser le plugin lighthouse-ecoindex."]},{"l":"Modèle de fichier de configuration de Lighthouse"},{"l":"Exemples à adapter suivant votre CI/CD","p":["Lancer la mesure sur une URL :","Projet example pour lighthouse CLI"]},{"l":"Documentation externe des dépendances","p":["lighthouse CLI","Puppeteer"]}],[{"l":"Cas d'usages et configurations avancées"},{"l":"Audit d'un site nécessitant un cookie","p":["Obligation de créer cookie pour fermer une popin, par exemple."]},{"l":"Utilisation du fichier extra-header.json"},{"l":"Utilisation du fichier input-file.json"},{"l":"Audit d'un site à accès sécurisé"},{"l":"En mode simple (liste d'URLs)"},{"l":"En mode mesure de parcours (avec le fichier de config JSON)","p":["La page d'authentiifcation doit faire partie de la liste de page à mesurer, cela pour chaque parcours dont une partie ou la totalité des pages sont sécurisée."]},{"l":"Modèle de fichier de configuration de Puppeteer (complet) sans authentification"}],[{"l":"L'Application desktop, EcoindexApp","p":["Une application (créé en Electron) est disponible afin d'utiliser lighthouse-plugin-ecoindex simplement, sans besoin utiliser les lignes de commandes dans le terminal.","L'application est téléchargeable sur GitHub. Vous trouverez plusieurs version de celle-ci. Installez celle adaptée à votre ordinateur.","Linux (Ubuntu): ecoindex-app_{version}_amd64.deb (non testé)","Linux (Red Hat): ecoindex-app-{version}-1.x86_64.rpm (non testé)","Windows ecoindex-app-{version}-win32-x64-setup.exe ( Information d'installation)","Mac (M1): EcoindexApp-{version}-arm64.dmg","Mac (Intel): EcoindexApp-{version}-x64.dmg","Télécharger l'application","EcoindexApp"]}],[{"l":"Processus d'installation","p":["Télécharger l'application"]},{"l":"Commun","p":["Après l'installation, lors du premier lancement, et lors des lancements suivant un ensemble d'actions et de vérifications sont réalisés.","Les éléments suivants seront vérifiés et installés :","La présence de NodeJS et sa version ;","Un navigateur sans interface(Chrome headless avec Puppeteer) pour réaliser les mesures ;","Notre outil de mesure lighthouse-plugin-ecoindex(en réalité les packages lighthouse-plugin-ecoindex-core et lighthouse-plugin-ecoindex-course).","Vous devrez installer NodeJS manuellement si vous n'en avez pas déjà une version installée. Télécharger NodeJS"]},{"l":"Systèmes d'exploitation"},{"l":"Windows","p":["Pour créer un installateur validé par Microsoft, il faut un compte développeur payant (400$/an), ce qui est impossible pour un projet bénévole/open-source. Le téléchargement et l'installation seront donc un peu plus \"complexe\" que d'habitude."]},{"l":"1. Téléchargement","p":["Suivant le navigateur utilisé (comme Edge), il vous demandera si vous êtes sûr de vouloir télécharger le fichier. Allez au bout des (ennuyeuses) questions.","Etape 1","Étape 2","Étape 3","i1 Dans le menu , Cliquez sur Conserver","i2 Cliquez sur Afficher plus","i3 Cliquez sur Conserver quand même"]},{"l":"2. Installation","p":["Une fois l'application ecoindex-app-{version}-win32-x64-setup.exe téléchargée, vous devrez double-cliquer sur le fichier pour lancer l'installation. Elle aussi vous posera des questions de sécurité.","Etape 1","Étape 2","e1 Cliquez sur Insformations complémentaires","i2 Cliquez sur Exécuter quand même"]},{"l":"Mac (M1 ou Intel)","p":["L'application étant signé avec un compte développeur, il n'y a pas d'actions spécifique à réaliser lors de l'installation ou lors du lancement. Des actions pourront vous être demandées si besoin."]},{"l":"Linux"},{"l":"Ubuntu (.deb)","p":["Vous avez deux méthode pour installer l'application sous Ubuntu"]},{"l":"Méthode 1: Software Center","p":["Pour installer un paquet deb avec le Software Center (Ubuntu Software), suivez les étapes simples ci-dessous :","Localisez le paquetage deb téléchargé. Par défaut, le système stocke les fichiers téléchargés dans le répertoire Downloads.","Paquet Deb dans Téléchargements","Faites un clic droit sur le fichier deb et choisissez Ouvrir avec une autre application.","Sélectionnez Software Installer dans la liste des programmes.","Fichier deb Ouvrir avec le menu de l'installateur de logiciels","Une nouvelle boîte de dialogue s'ouvre avec des détails sur le logiciel.","Cliquez sur le bouton Installer pour continuer.","deb package install from software center","Saisissez le mot de passe de l'utilisateur lorsque vous y êtes invité et appuyez sur Entrée pour vous authentifier.","Demande d'authentification pour l'installation du logiciel","Attendez la fin de l'installation. Une fois l'installation terminée, le logiciel est prêt à être utilisé."]},{"l":"Méthode 2: Installer les fichiers deb à l'aide du terminal","p":["Le terminal Ubuntu permet d'installer des paquets en utilisant différents gestionnaires de paquets et commandes. Vous trouverez ci-dessous quelques options pour installer des paquets deb à l'aide de commandes du terminal.","Option 1 : Commande dpkg","La commande dpkg est un gestionnaire de paquets qui permet d'installer, de supprimer et de construire des paquets.","Pour installer un paquetage deb à l'aide de la commande dpkg, exécutez la commande suivante :","sudo dpkg -i chemin du paquet","sudo dpkg -i sortie du terminal Indiquez le mot de passe de l'utilisateur et attendez la fin de l'installation. Si un paquetage repose sur des dépendances non disponibles, la commande dpkg renvoie une erreur. Téléchargez les dépendances manuellement.","Option 2 : Gestionnaire de paquets apt","La commande apt lance le gestionnaire de paquets apt. Pour installer un paquet deb à l'aide de la commande apt, exécutez la commande suivante","sudo apt install chemin du paquet","sudo apt install deb package terminal output Indiquez le mot de passe de l'utilisateur si on vous le demande. Le gestionnaire de paquets localise et installe automatiquement toutes les dépendances.","Option 3 : Installateur de paquets GDebi","L'outil GDebi fonctionne également comme un outil en ligne de commande pour l'installation de paquets. Pour installer un paquet deb avec GDebi en ligne de commande, exécutez ce qui suit dans le terminal :","sudo gdebi chemin du paquet","sudo gdebi install deb paquet Appuyez sur Y pour confirmer l'installation et entrez le mot de passe de l'utilisateur."]},{"l":"Red Hat (.rpm)","p":["Consulter leur documentation ici."]},{"l":"Problèmes et bugs","p":["Consulter la page dédiée."]}],[{"l":"Mesures simple","p":["EcoindexApp en mode Mesure d'URLs (mode simple)"]},{"l":"Usage","p":["Ce mode simple est le plus direct."]},{"l":"Il permet d'obtenir :","p":["Les mesures d'impact environnementale multicritères de votre site ;","Une évalation de la mise en oeuvre des bonnes pratiques du Green IT ;"]},{"l":"En générant :","p":["Un rapport HTML contenant les analyses Lighthouse et l'écoindex de GreenIT.fr®"]},{"l":"Utilisation","p":["Spécifiez le dossier où vous voudrez sauvegarder les mesures ;","Saisissez la ou les URLS à tester ;","Cliquez sur mesurer et patientez ;","Votre navigateur web par défaut va se lancer pour afficher le resultat de la mesure. Les fichiers sont également sauvegardez, pour une consultation ultérieure dans le dossier spécifié à l'étape 1."]},{"l":"Rapports","p":["Afin d'acceler la mesure et pour pouvoir vous donner directement le résultat de la mesure, nous avons limité ce type de mesure à 1 fichier HTML.","Pour plus de formats (JSON, JSON Summary/Simplifié et Déclaration environnementale), utilisez la mesure de parcours. Mesures de parcours","Rapports au format HTML"]}],[{"l":"Mesures de parcours","p":["EcoindexApp en mode Mesure de parcours (mode complet)"]},{"l":"Usage","p":["Ce mode complet permet de mesurer des parcours entier.","Un fichier JSON sauvegarde vos paramètres afin de relancer simplement et de multiple fois la mesure de vos parcours pour visualiser l'évolution de l'impact écologique des pages, suite à vos actions."]},{"l":"Il permet d'obtenir :","p":["Les mesures d'impact environnementale multicritères de votre site ;","Une évalation de la mise en oeuvre des bonnes pratiques du Green IT."]},{"l":"En générant :","p":["Des rapports HTML et JSON contenant les analyses Lighthouse et l'écoindex de GreenIT.fr®","La Déclaration Environnementale de votre site – Environmental Impact Statement (EIS) – une initiative de GreenIT.fr®"]},{"l":"Utilisation","p":["Nous allons détailler l'écran de haut en bas."]},{"l":"1. Sélectionner le dossier de génération","p":["Spécifiez le dossier où vous voudrez sauvegarder les mesures.","Si le dossier est vide, une configuration par défaut est proposée, à adapter ;","Si le dossier contient déjà un fichier de configuration, elle sera automatiquement rechargée et remplacera la configuration par défaut."]},{"l":"2. Configuration des parcours"},{"l":"Gestion du fichier de configuration","p":["Les boutons Recharger/ Enregistrer agissent sur le fichier de sauvegarde.","Lors du lancement de la mesure, une sauvegarde du fichier JSON est automatiquement effectuée."]},{"l":"Extra-Header","p":["Cette partie gère les données envoyées dans les headers de chaque chargement de page. Elle peut permettre de passer des paramètres d'authentifications, de gestion de cookies...","Si vous n'en avez pas l'usage, vous pouvez mettre n'importe quoi, ça n'a pas d'impact direct sur la mesure."]},{"l":"Choisissez les rapports que vous souhaitez générer","p":["HTML: Les rapports Lighthouse au format HTML contenant l'écoindex ;","JSON: Les rapports Lighthouse au format JSON contenant l'écoindex ;","Statement : La déclaration environnementale.","Si vous souhaitez générer la déclaration environnementale, la génération des fichiers JSON doit être obligatoirement sélectionnée."]},{"l":"Parcours","p":["Vous pouvez ajouter et retirer des parcours, selon vos besoins.","Composant d'un parcours :","Nom du parcours: obligatoire car servant au nom du fichier de sortie (HTML et JSON) ;","Objectif: Information nécessaire pour la déclaration environnementale ;","Description: Information nécessaire pour la déclaration environnementale ;","Parcours des Meilleurs pages: Information nécessaire pour la déclaration environnementale, 1 seul parcours doit être identifié comme Parcours des Meilleurs pages;","Urls à mesurer: Vous pouvez ajouter et retirer des URLS, selon vos besoins."]},{"l":"3. Lancer la mesure","p":["Cliquez sur mesurer et patientez ;","Contrairement à la mesure simple, votre navigateur web ne vas pas se lancer, vu que plusieurs fichiers vont être générés. Votre explorateur de fichier s'ouvrira, à la racine du dossier spécifié au point 1."]},{"l":"Raports","p":[".html",".json La version JSON du EIS doit être déposé à la racine du site, afin d'être consultable suivant cette URL type https://domain.tld/ecoindex-environmental-statement.json(domain.tld est à remplacer par votre nom de domain).",".md(Markdown)","*.report.html: Les rapports Lighthouse+ecoindex HTML :","*.report.json: Les rapports Lighthouse+ecoindex JSON :","best-pages.report.html ;","best-pages.report.json ;","Ce fichier est généré en prévision d'une lecture automatisée des EIS par des bots.","Contenu d'un dossier de mesure","Contenu du dossier racine","Des dossiers contenant vos mesures, au format date & heure.","discovery.report.html ;","discovery.report.json ;","Fichiers statements pour la déclaration environnementale (EIS) :","input-file.json: Le fichier de configuration de mesure de parcours ;","Le dossier des mesures et le JSON de configuration","On part du postulat que vous effectué 1 mesure de 2 parcours, nommé \"Best pages\", \"Discovery\". Vous avez demandez la génération des fichiers HTML, JSON et la déclaration environnementale.","summary.report.json: Une version simplifié et fusionné des fichiers *.report.json;","Un dossier assets contenant des éléments images ;","Un dossier statements contenant 3 versions de l'EIS :","Un fichier README.md expliquant comment utiliser l'EIS ;"]},{"l":"Rapports","p":["Rapports au format HTML Rapports au format JSON Simplifié Rapports au format JSON Complet"]}],[{"l":"Problèmes et bugs","p":["La multiplicité des configurations possibles et les différentes systèmes d'exploitation ont été testés, mais il y a peut-être des \"trous dans la raquette\".","L'application reste à tester et la documentation à écrire. N'hésitez pas à nous faire des retours !","Si vous rencontrez un problème au lancement de l'application, lors des mesures... n'hésitez pas à contacter renaud@greenit.fr ou via le matermost de l'association Green IT.","Mattermost de l'association","Envoyez le contenu du fichier log que vous pourrez consulter depuis l'application dans Aide/Help Log..."]},{"l":"Déterminer les problèmes ou voir ce qui se passe dans l'application.","p":["Vous trouverez en bas de l'application, un élément qui peut se plier/déplier ( Afficher les informations).","Vous y touverez la console (ce que retourne lighthouse-plugin-ecoindex) et les éléments testés et retournés lors du lancement de l'installation (que l'on peut retrouver dans les logs).","Debug zone"]}],[{"l":"Monorepo"},{"l":"Description","p":["Ce projet est un monorepo qui contient les différents packages du plugin-lighthouse-ecoindex."]},{"l":"Packages et applications","p":["lighthouse-plugin-ecoindex-core=> package principal du plugin-lighthouse-ecoindex. Il contient les fonctionnalités principales d'un plugin lighthouse et ajoute les fonctionnalités spécifiques à l'écoindex.","lighthouse-plugin-ecoindex-course=> package pour gérer les mesures d'écoindex, utilisée par l'application de ligne de commande et EcoindexApp.","lighthouse-plugin-ecoindex-cli=> application de ligne de commande pour lancer les audits.","EcoindexApp=> application pour lancer les audits et gérer les résultats plus d'informations."]},{"l":"Stack","p":["Librairies et dépendances"]}],[{"l":"plugin-lighthouse-ecoindex (cli)"},{"l":"Description","p":["Ce package permet de réaliser les mesures de parcours et de générer des rapports d'écoindex en ligne de commande.","Ce package est dépendant du package plugin-lighthouse-ecoindex-core et du package plugin-lighthouse-ecoindex-courses."]},{"l":"Documentation d'utilisation","p":["lighthouse-ecoindex CLI"]}],[{"l":"plugin-lighthouse-ecoindex-courses"},{"l":"Description","p":["Ce package permet de réaliser les mesures de parcours et de générer des rapports d'écoindex.","Ce package est utilisée par l'outils en ligne de commande ecoindex-cli et par l'application desktop EcoindexApp.","Ce package est dépendant du package plugin-lighthouse-ecoindex-core."]}],[{"l":"plugin-lighthouse-ecoindex-core"},{"l":"Description","p":["Ce pakage est le package principal du plugin-lighthouse-ecoindex. Il contient les fonctionnalités principales du plugin lighthouse et ajoute les fonctionnalités spécifiques à l'écoindex.","Il est utilisé par les autres packages du plugin et doit être utilisé pour les audits lancés avec lighthouse-ci."]},{"l":"Documentation d'utilisation","p":["Lighthouse CI"]},{"l":"Documentation externe des dépendances","p":["Lighthouse CI"]}],[{"l":"Les audits du plugin","p":["Les bonnes pratiques proposées comme audits dans le plugin Ecoindex Lighthouse","Pour être ajoutées comme audits, les bonnes pratiques doivent être mesurables et quantifiables.","Les « 115 bonnes pratiques » du Collectif GreenIT Référentiel général d'écoconception de services numériques (RGESN)"]},{"l":"Autres Audits / Bonnes pratiques","p":["Vérifier si le site fonctionne à l'énergie verte avec thegreenwebfoundation.org/api https://api.thegreenwebfoundation.org/api/v3/greencheck/${domaine}","D'autres seront ajoutés ultérieurement."]}],[{"l":"#RWEB - Les « 115 bonnes pratiques » du Collectif GreenIT","p":["Listes des bonnes pratiques GreenIT opposables, présentent dans l'outil GreenIT analysis.","Les 115 bonnes pratiques"]},{"l":"Liste des bonnes pratiques GreenIT","p":["Ajouter des en-têtes expires ou cache-control","Compresser les ressources (>= 95%)","Éviter les erreurs de requête HTTP","Éviter les redirections","Externaliser css et js","Fournir une feuille de style pour l'impression (test : https://www.creastuces.com/des-styles-css-pour-optimiser-limpression-papier/)","Limiter le nombre de domaines (<6)","Limiter le nombre de requêtes HTTP (<27) - core ecoindex","Limiter les fichiers de feuilles de style (<=10)","Longueur maximale des cookies (<512 octets)","Minification des css et js","Mis à jour 01/04/2024","Ne pas faire de modification du DOM lorsqu’on le traverse","Ne pas redimensionner l'image dans le navigateur","Ne pas télécharger d'images inutiles","Ne pas utiliser de bouton social standard","Ne pas utiliser de plugins","Optimiser les images bitmap","Optimiser les images svg","Pas de cookie pour les ressources statiques","Utiliser des polices de caractères standard","Utiliser HTTP/2 au lieu de HTTP/1","Valider les js"]}],[{"l":"Référentiel général d'écoconception de services numériques (RGESN)","p":["Référentiel RGESN"]},{"l":"Liste (partielle) des critères RGESN v0","p":["4.1 Le service numérique est-il utilisable via une connexion bas débit ?","4.10 Le service numérique utilise-t-il majoritairement des polices de caractères du système d'exploitation ?","6.1 Le service numérique s'astreint-il à un poids maximum par écran ?","6.2 Le service numérique s'astreint-il à une limite de requêtes par écran ?","6.3 Le service numérique utilise-t-il des mécanismes de mises en cache pour la totalité des contenus transférés dont il a le contrôle ?","6.4 Le service numérique a-t-il mis en place des techniques de compression sur la totalité des ressources transférées dont il a le contrôle ?","6.5 Le service numérique affiche-t-il majoritairement des éléments graphiques et des médias dont les dimensions d'origine correspondent aux dimensions du contexte d'affichage ?","6.6 Le service numérique propose-t-il un mécanisme de chargement progressif pour les éléments graphiques et les médias le nécessitant ?","6.9 Le service numérique utilise-t-il un stockage côté client de certaines ressources afin d'éviter des échanges réseaux inutiles ?","7.1 Le service numérique a-t-il recours à un système de cache serveur pour les données les plus utilisées ?","7.2 Le service numérique est-il configuré pour transmettre depuis le serveur des contenus compressés au client qui les accepte ?","8.1 Le service numérique utilise-t-il un hébergement signataire du Code de Conduite européen sur les Datacentres ?","8.2 Le service numérique utilise-t-il un hébergement ayant une démarche de réduction de son impact écologique ?","8.3 Le service numérique utilise-t-il un hébergement qui fournit une politique de gestion durable des équipements ?","8.4 Le service numérique utilise-t-il un hébergement qui fournit des indicateurs d'impacts environnementaux liés à son activité ?","8.5 Le service numérique utilise-t-il un hébergement dont le PUE (Power Usage Effectiveness) est communiqué ?","8.6 Le service numérique utilise-t-il un hébergement dont son WUE (Water Usage Effectiveness) est communiqué ?","8.7 Le service numérique utilise-t-il un hébergement dont la consommation d'électricité est majoritairement d'origine renouvelable ?","Liste des critères du RGESN possiblement mesurables avec lighthouse-ecoindex"]},{"l":"RGESN v0 au format \"JSON\"","p":["https://www.data.gouv.fr/fr/datasets/r/d76e723d-543b-400d-95d3-3c7bcc2187c1","Attention, il est indique v1 dans le fichier, mais c'est la v0."]},{"l":"RGESN a télécharger","p":["Référentiel RGESN à télécharger (data.gouv)"]}],[{"l":"Déclaration Environnementale, l'initiative de GreenIT.fr®"},{"l":"Objectifs et principes de la déclaration d'impact","p":["Comme toute production numérique, un site web a des impacts environnementaux qui peuvent être mesurés, affichés et réduits.","Ce projet de déclaration environnementale a vocation à établir une méthode commune pour l'évaluation des impacts des sites web sur l’environnement, et ce dans le but de créer deux effets vertueux :","Permettre aux utilisateurs finaux de faire des arbitrages quant à leur consommation numérique, par exemple en choisissant, pour un service donné, le site web le moins impactant pour la planète.","Aider les éditeurs de site à réduire l’impact de leur production sur l’environnement, en leur donnant les outils et méthodes pour mesurer et minimiser cet impact, ainsi qu’un référentiel commun."]},{"l":"Les exports proposés par l'outil lightouse-ecoindex","p":["L'export HTML provient du site de Déclaration Environnementale (page gabarits). La version Markdown est une version adaptée de la version HTML."]},{"l":"Version Markdown","p":["Cette version peut-être ajoutée à votre CMS si il prend en charge le Markdown. L'ÉcoIndex est affiché sous forme image."]},{"l":"Capture d'écran de la version Markdown","p":["Lighthouse EcoIndex - version Markdown"]},{"l":"Version HTML","p":["La version HTML peut-être ajouter directement à votre site web.","Vous pouvez adapter le style CSS à votre charte graphique, mais il est important de conserver les classes CSS pour que le rendu et les codes couleurs de l'Ecoindex soit correctement affiché."]},{"l":"Capture d'écran de la version HTML","p":["Lighthouse EcoIndex - version HTML"]},{"l":"Version JSON","p":["La version JSON est un export normalisé des données brutes de l'outil. Son objectif est d'être utilisé pour des traitements automatisés (bot). Comme le sont des fichiers tels que robots.txt ou sitemap.xml."]},{"l":"Exemple de fichier de déclaration pour les bots `ecoindex-environmental-statement.json`"}],[{"l":"Contribuer à ce projet","p":["Ils restent encore beaucoup de choses à faire pour améliorer ce projet. Vous pouvez nous aider en contribuant à ce projet."]},{"l":"Comment contribuer ?","p":["Vous pouvez contribuer de différentes manières :","En ouvrant une issue","En proposant une pull request"]},{"l":"Comment installer le projet en local ?","p":["L'usage du devcontainer n'est pas obligatoire pour le développement.","Un devcontainers à été mis en place pour faciliter le développement. Il suffit d'installer Docker et Visual Studio Code et de suivre les étapes suivantes :","Cloner le projet","Ouvrir le projet dans Visual Studio Code","Il va détecter la présence du dossier .devcontainer et cliquer sur le bouton Reopen in Container attendez le chargement...","Ouvrir un terminal et lancer la commande npm install","Consulter les sous-dossiers de examples-developpement-test pour voir les exemples d'utilisation et suivre les README.md pour les lancer.","Ce devcontainer contient notamment un serveur Lighthouse pour tester le plugin en mode"]},{"l":"Lighthouse server","p":["En mode devcontainer connectez-vous au container Docker via sa ligne de commande et faites lhci wizard pour configurer le serveur Lighthouse. Reportez cette configuration dans le fichier .lighthouserc.js à la racine du projet.","Sans devcontainer vous pouvez installer le serveur Lighthouse en suivant la documentation officielle"]},{"l":"Liste des tâches","p":["Plugin;","npx-example;","test lighthouse-ci;","test lightouse CLI;","test (local);","Continuer à documenter le projet ;","Valider les Good and Poor thresholds voir [lighthouse-plugin-ecoindex/utils/index.js#getMetricRange()] ;","Ajouter des bonnes pratiques, avec des audits ;","Localiser le plugin i18n ;","Ajouter des tests unitaires ;","..."]},{"l":"Sources d'aides et d'inspirations","p":["https://github.com/GoogleChrome/lighthouse/blob/main/docs/user-flows.md","https://engineering.q42.nl/making-a-lighthouse-plugin-work-with-lighthouse-ci/","https://github.com/googleads/publisher-ads-lighthouse-plugin"]},{"l":"Contributeurs"}],[{"l":"A propos de ce projet","p":["Une contribution de l'association GreenIT.fr à la communauté de l'écoconception."]}],[{"l":"Format HTML","p":["Rapport HTML Lighthouse avec l'intégration des mesures et bonnes pratiques Écoindex.","Les multiples mesures demandées / Étapes d'un parcours Haut de page d'une mesure, avec Ecoindex Bas de page d'une mesure, avec l'Ecoindex, les mesures, les bonnes pratiques validées ou non"]}],[{"l":"Format JSON Simplifé","p":["Rapport JSON Summary/Simplifié contenant les données essentielles de Lighthouse avec l'intégration des mesures et bonnes pratiques Écoindex.","Utile, par exemple, pour faire des rapports d'audit automatisé à une date précise, sans charger les rapports Lighthouse + Ecoindex complet.","Ce fichier n'est généré que lors de la mesure d'un parcours avec la commande npx lighthouse-plugin-ecoindex collect options --json-file filename.json","Collect d'un parcours","Exemple de fichier généré lors d'une mesure de parcours."]}],[{"l":"Format JSON Complet","p":["Rapport JSON Lighthouse complet avec l'intégration des mesures et bonnes pratiques Écoindex.","Ce type de fichier est au format brut Lighthouse et est difficilement exploitable, de préférence, utilisez la version simplifiée. Rapport au format JSON Simplifé","Exemple de fichier généré lors d'une mesure."]}]]